{"remainingRequest":"C:\\OSPanel\\domains\\vueshop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\OSPanel\\domains\\vueshop\\src\\components\\Catalog_item.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\OSPanel\\domains\\vueshop\\src\\components\\Catalog_item.vue","mtime":1595340701320},{"path":"C:\\OSPanel\\domains\\vueshop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593523940421},{"path":"C:\\OSPanel\\domains\\vueshop\\node_modules\\babel-loader\\lib\\index.js","mtime":1593523940168},{"path":"C:\\OSPanel\\domains\\vueshop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593523940421},{"path":"C:\\OSPanel\\domains\\vueshop\\node_modules\\vue-loader\\lib\\index.js","mtime":1593523981027}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7bWFwR2V0dGVycywgbWFwQWN0aW9uc30gZnJvbSAidnVleCINCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICdDYXRhbG9nSXRlbScsDQogICAgcHJvcHM6IHsNCiAgICAgICAgcHJvZHVjdHM6IHsNCiAgICAgICAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgICAgICAgIGRlZmF1bHQoKSB7fQ0KICAgICAgICB9DQogICAgfSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgaXRlbXM6IDENCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICAuLi5tYXBBY3Rpb25zKFsnQUREVE9DQVJUJ10pLA0KICAgICAgICBpbmNyZWFzZUl0ZW0oKXsNCiAgICAgICAgICAgIGlmICh0aGlzLml0ZW1zIDwgMTAwMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMrKw0KICAgICAgICAgICAgICAgIHRoaXMuZmluYWxQcmljZSArPSB0aGlzLnByb2R1Y3RzLnByaWNlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgICBkZWNyZWFzZUl0ZW0oKXsNCiAgICAgICAgICAgIGlmICh0aGlzLml0ZW1zKSB7DQogICAgICAgICAgICAgICAgdGhpcy5pdGVtcy0tDQogICAgICAgICAgICAgICAgdGhpcy5maW5hbFByaWNlIC09IHRoaXMucHJvZHVjdHMucHJpY2UNCiAgICAgICAgICAgIH0NCiAgICAgICAgIH0sDQogICAgICAgICBhZGRUb0NhcnQoKXsNCiAgICAgICAgICAgICAgICBsZXQgaXRlbSA9IHsNCiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMucHJvZHVjdHMuaWQsDQogICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnByb2R1Y3RzLnRpdGxlLA0KICAgICAgICAgICAgICAgICAgICBwcmljZTogdGhpcy5wcm9kdWN0cy5wcmljZSwNCiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiB0aGlzLml0ZW1zDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5BRERUT0NBUlQoaXRlbSkNCiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOw0KICAgICAgICAgICAgICAgIH0pLnRoZW4oKCk9PnsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHN1Y2Nlc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzcy5jbGFzc0xpc3QuYWRkKCdzdWNjZXNzLWFkZC10by1jYXJ0JykNCiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MuaW5uZXJUZXh0ID0gJ9Ci0L7QstCw0YAg0YPRgdC/0LXRiNC90L4g0LTQvtCx0LDQstC70LXQvSDQsiDQutC+0YDQt9C40L3RgyEnDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChzdWNjZXNzKTsNCiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3VjY2Vzcy1hZGQtdG8tY2FydCcpLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN1Y2Nlc3MtYWRkLXRvLWNhcnQnKVtpXS5yZW1vdmUoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICB9LA0KICAgICAgICAgZ29Ub0xpbms6IGZ1bmN0aW9uKGUpew0KICAgICAgICAgICAgbGV0IHVybCA9IHRoaXMuZ2V0UGFyZW50KGUudGFyZ2V0LCAncHJvZHVjdC1idXR0b25zLWNvbnRhaW5lcicpLnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0LXdhdGNoJykuZ2V0QXR0cmlidXRlKCdocmVmJykNCiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6IHVybCB9KS5jYXRjaChlID0+IHt9KQ0KICAgICAgICAgfSwNCiAgICAgICAgZ2V0UGFyZW50OiBmdW5jdGlvbihlbCwgY2xzKXsNCiAgICAgICAgICAgIHdoaWxlICgoZWwgPSBlbC5wYXJlbnRFbGVtZW50KSAmJiAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNscykpOw0KICAgICAgICAgICAgcmV0dXJuIGVsOw0KICAgICAgICB9LA0KICAgIH0sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgLi4ubWFwR2V0dGVycyhbJ2NhcnRJdGVtc1ZhbHVlJ10pDQogICAgfQ0KfQ0K"},{"version":3,"sources":["Catalog_item.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Catalog_item.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\r\n<div class = \"product\">\r\n        <img :src=\"'/img/bouqets/' + products.id + '/' + '1.jpg'\" alt = \"img\" class = \"item_img\">\r\n        <p class = \"product-title\">\r\n            <a href = \"/product.php\">{{products.title}}</a>\r\n        </p>\r\n        <p class = \"product-price\">{{products.price}} р.</p>\r\n        <div class = \"product-buttons-container\">\r\n            <div class = \"product-info\"></div>\r\n            <div class = \"product-button product-minus\" @click = \"decreaseItem\">\r\n                <div class = \"product-button-inset\">\r\n                    <div class = \"product-button-anim-first\"></div>\r\n                    <div class = \"product-button-anim-second product-minus\"></div>\r\n                </div>\r\n            </div>\r\n            <div class = \"product-button products-amount\">\r\n                <div class = \"product-button-inset\">\r\n                    <div class = \"product-button-anim-first\">{{items}}</div>\r\n                    <div class = \"product-button-anim-second\">{{items}}</div>\r\n                </div>\r\n            </div>\r\n            <div class = \"product-button product-plus\" @click = \"increaseItem\">\r\n                <div class = \"product-button-inset\">\r\n                    <div class = \"product-button-anim-first\"></div>\r\n                    <div class = \"product-button-anim-second product-plus\"></div>\r\n                </div>\r\n            </div>\r\n            <div class = \"product-button product-order\" @click = \"addToCart\" data-info = \"В корзину\">\r\n                <div class = \"product-button-inset\">\r\n                    <div class = \"product-button-anim-first\"></div>\r\n                    <div class = \"product-button-anim-second\"></div>\r\n                </div>\r\n            </div>\r\n            <div class = \"product-button product-like\" data-info = \"В избранное\">\r\n                <div class = \"product-button-inset\">\r\n                    <div class = \"product-button-anim-first\"></div>\r\n                    <div class = \"product-button-anim-second\"></div>\r\n                </div>\r\n            </div>\r\n            <a :href = \"'/' + products.category_title + '/' + products.id\" class = \"product-button product-watch\" data-info = \"Подробнее\" @click.prevent = \"goToLink($event)\">\r\n                <div class = \"product-button-inset\">\r\n                    <div class = \"product-button-anim-first\"></div>\r\n                    <div class = \"product-button-anim-second\"></div>\r\n                </div>\r\n            </a>\r\n        </div>\r\n        <div style = \"padding: 20px 0 10px 0; text-align: center;\">\r\n            <button>Заказать в один клик!</button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {mapGetters, mapActions} from \"vuex\"\r\n\r\nexport default {\r\n    name: 'CatalogItem',\r\n    props: {\r\n        products: {\r\n            type: Object,\r\n            default() {}\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            items: 1\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions(['ADDTOCART']),\r\n        increaseItem(){\r\n            if (this.items < 1000) {\r\n                this.items++\r\n                this.finalPrice += this.products.price\r\n            }\r\n        },\r\n         decreaseItem(){\r\n            if (this.items) {\r\n                this.items--\r\n                this.finalPrice -= this.products.price\r\n            }\r\n         },\r\n         addToCart(){\r\n                let item = {\r\n                    id: this.products.id,\r\n                    title: this.products.title,\r\n                    price: this.products.price,\r\n                    amount: this.items\r\n                }\r\n                new Promise((resolve, reject) => {\r\n                    this.ADDTOCART(item)\r\n                    resolve();\r\n                }).then(()=>{\r\n                    let success = document.createElement('div')\r\n                        success.classList.add('success-add-to-cart')\r\n                        success.innerText = 'Товар успешно добавлен в корзину!'\r\n                    \r\n                    document.body.append(success);\r\n                }).then(() => {\r\n                    setTimeout(()=>{\r\n                        for (let i = 0; i < document.querySelectorAll('.success-add-to-cart').length; i++) {\r\n                            document.querySelectorAll('.success-add-to-cart')[i].remove()\r\n                        }\r\n                    }, 1000)\r\n                })\r\n         },\r\n         goToLink: function(e){\r\n            let url = this.getParent(e.target, 'product-buttons-container').querySelector('.product-watch').getAttribute('href')\r\n                this.$router.push({ path: url }).catch(e => {})\r\n         },\r\n        getParent: function(el, cls){\r\n            while ((el = el.parentElement) && !el.classList.contains(cls));\r\n            return el;\r\n        },\r\n    },\r\n    computed: {\r\n        ...mapGetters(['cartItemsValue'])\r\n    }\r\n}\r\n</script>"]}]}